stages:
  - debug
  - code_sync

# è°ƒè¯•ï¼šæ‰“å° CI_PIPELINE_SOURCE å€¼
debug:
  stage: debug
  script:
    - echo "ðŸ” CI_PIPELINE_SOURCE=$CI_PIPELINE_SOURCE"
  rules:
    - when: always

# åŠ¨æ€å¼•å…¥æ¨¡æ¿æ–‡ä»¶
include:
  # 1ï¸âƒ£ æ‰‹åŠ¨è§¦å‘ï¼ˆwebï¼‰æˆ–å®šæ—¶è§¦å‘ï¼ˆscheduleï¼‰ => ç”¨ ssh_sync.yml
  - project: 'test/ci-templates'
    file: '/mirror/ssh_sync.yml'
    rules:
      - if: '$CI_PIPELINE_SOURCE == "web"'
      - if: '$CI_PIPELINE_SOURCE == "schedule"'

  # 2ï¸âƒ£ å…¶ä»–æƒ…å†µï¼ˆpushã€merge_request_eventã€triggerç­‰ï¼‰ => é»˜è®¤ç”¨ github_sync_ssh.yml
  - project: 'test/ci-templates'
    file: '/mirror/github_sync_ssh.yml'
    rules:
      - when: always
